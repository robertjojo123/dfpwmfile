-- Define the schematic data
local schematic = {
    width = 2,
    height = 1,
    length = 6,
    {x = 0, y = 0, z = 0, block = 'dirt'},
    {x = 0, y = 0, z = 1, block = 'dirt'},
    {x = 0, y = 0, z = 2, block = 'grass'},
    {x = 0, y = 0, z = 3, block = 'dirt'},
    {x = 0, y = 0, z = 4, block = 'dirt'},
    {x = 0, y = 0, z = 5, block = 'dirt'},
    {x = 1, y = 0, z = 0, block = 'dirt'},
    {x = 1, y = 0, z = 1, block = 'dirt'},
    {x = 1, y = 0, z = 2, block = 'dirt'},
    {x = 1, y = 0, z = 3, block = 'dirt'},
    {x = 1, y = 0, z = 4, block = 'dirt'},
    {x = 1, y = 0, z = 5, block = 'dirt'}
}

-- Function to move the turtle to a given position (x, y, z)
local function move_to_position(x, y, z)
    -- Adjust turtle's position to match the coordinates
    local dx = x - (turtle.getX() or 0)
    local dy = y - (turtle.getY() or 0)
    local dz = z - (turtle.getZ() or 0)

    -- Move in x direction
    if dx > 0 then
        turtle.move(dx)
    elseif dx < 0 then
        turtle.move(-dx)
    end

    -- Move in y direction (vertical movement)
    if dy > 0 then
        turtle.up(dy)
    elseif dy < 0 then
        turtle.down(-dy)
    end

    -- Move in z direction (horizontal movement)
    if dz > 0 then
        turtle.forward(dz)
    elseif dz < 0 then
        turtle.back(-dz)
    end
end

-- Function to place the block
local function place_block(block_name)
    -- Check if the turtle has the block in its inventory
    local success, data = turtle.inspectDown()
    if not success or data.name ~= block_name then
        -- Try to get the correct block from the turtle's inventory
        for i = 1, 16 do
            turtle.select(i)
            local success, data = turtle.getItemDetail()
            if success and data.name == block_name then
                break
            end
        end
    end
    -- Place the block
    turtle.placeDown()
end

-- Build the schematic by iterating through the schematic data
local function build_schematic()
    for _, block_data in ipairs(schematic) do
        -- Move to the position of each block and place it
        move_to_position(block_data.x, block_data.y, block_data.z)
        place_block(block_data.block)
    end
end

-- Start building the schematic
build_schematic()
