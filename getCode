-- Get the wireless modem
local modem = peripheral.find("modem")

-- Check if the modem is connected
if not modem then
    print("No modem found.")
    return
end

-- Open the modem on the same channel as the sender (channel 100)
modem.open(100)

-- Specify the file to save the received content
local filePath = "/path/to/save/received_file.txt"
local file = io.open(filePath, "w")
if not file then
    print("Could not open file.")
    return
end

-- Listen for incoming data (the whole file)
print("Waiting for file...")

local _, _, _, _, _, fileContent = os.pullEvent("modem_message")

-- Write the received content to the file
file:write(fileContent)
file:close()

print("File received and saved successfully.")
